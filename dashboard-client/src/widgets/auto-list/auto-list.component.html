<div class='catalog'>
  <div class="flex items-center justify-between mb-1">
    <div class="flex items-center flex-column gap-2">
      <small>Бренды</small>
     <ng-container *ngFor="let brand of brands; let index">
       <app-auto-brand [brand]="brand"></app-auto-brand>
     </ng-container>
      <small class="more-tag"><small>+ еще</small></small>
    </div>
    <div class="flex flex-column">

      <div class="inline-flex align-items-center mt-2 gap-2">
        <div class="flex flex-column items-center justify-content-center gap-2">
          <small>Cортировать</small>
          <div class="flex justify-center">
            <div class="xl:w-96">
              <select
                class='py-1 px-2 bg-white border-gray rounded-lg text-sm'
                [name]="sortType"
                [(ngModel)]="sortType"
                (change)='handleSort()'
              >
                <option
                  *ngFor="let setting of sortSettings"
                  [value]="setting.slug"
                >
                  {{setting.title}}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div class="inline-flex items-center justify-center gap-4">
          <button
            type="button"
            class="border-1"
            (click)="handleChangeMode('card')"
            [ngClass]="mode === 'card' ? 'active' : ''"
          >
            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="1" y="1" width="14" height="14" rx="2" stroke="#A1A5B7" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 14.5L8 1.5" stroke="#A1A5B7" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button
            type="button"
            class="border-1"
            (click)="handleChangeMode('table')"
            [ngClass]="mode === 'table' ? 'active' : ''"
          >
            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="1" y="1" width="14" height="14" rx="2" stroke="#A1A5B7" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 14.5L8 1.5" stroke="#A1A5B7" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button
            styleClass="p-button-outlined p-button-primary"
          >
            <svg width="20" height="26" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M0.574675 0.737134C0.665778 0.589726 0.826712 0.5 1 0.5H13C13.1733 0.5 13.3342 0.589726 13.4253 0.737134C13.5164 0.884543 13.5247 1.06861 13.4472 1.22361L9.5 9.11803V15C9.5 15.1733 9.41027 15.3342 9.26287 15.4253C9.11546 15.5164 8.93139 15.5247 8.77639 15.4472L4.77639 13.4472C4.607 13.3625 4.5 13.1894 4.5 13V9.11803L0.552787 1.22361C0.47529 1.06861 0.483572 0.884543 0.574675 0.737134ZM1.80902 1.5L5.44721 8.77639C5.48193 8.84582 5.5 8.92238 5.5 9V12.691L8.5 14.191V9C8.5 8.92238 8.51807 8.84582 8.55279 8.77639L12.191 1.5H1.80902ZM10.6464 10.6464C10.8417 10.4512 11.1583 10.4512 11.3536 10.6464L13 12.2929L14.6464 10.6464C14.8417 10.4512 15.1583 10.4512 15.3536 10.6464C15.5488 10.8417 15.5488 11.1583 15.3536 11.3536L13.7071 13L15.3536 14.6464C15.5488 14.8417 15.5488 15.1583 15.3536 15.3536C15.1583 15.5488 14.8417 15.5488 14.6464 15.3536L13 13.7071L11.3536 15.3536C11.1583 15.5488 10.8417 15.5488 10.6464 15.3536C10.4512 15.1583 10.4512 14.8417 10.6464 14.6464L12.2929 13L10.6464 11.3536C10.4512 11.1583 10.4512 10.8417 10.6464 10.6464Z" fill="#8D91A4"/>
            </svg>
          </button>
          <button
            type="button"
          >
            <svg width="30" height="36" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M6.24118 4.73713C6.33228 4.58973 6.49322 4.5 6.6665 4.5H18.6665C18.8398 4.5 19.0007 4.58973 19.0918 4.73713C19.1829 4.88454 19.1912 5.06861 19.1137 5.22361L15.1665 13.118V19C15.1665 19.1733 15.0768 19.3342 14.9294 19.4253C14.782 19.5164 14.5979 19.5247 14.4429 19.4472L10.4429 17.4472C10.2735 17.3625 10.1665 17.1894 10.1665 17V13.118L6.21929 5.22361C6.14179 5.06861 6.15008 4.88454 6.24118 4.73713ZM7.47552 5.5L11.1137 12.7764C11.1484 12.8458 11.1665 12.9224 11.1665 13V16.691L14.1665 18.191V13C14.1665 12.9224 14.1846 12.8458 14.2193 12.7764L17.8575 5.5H7.47552Z" fill="#6c757d"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="mode === 'card'" class='grid grid-cols-4 gap-10 mt-2'>
    <ng-container *ngFor="let card of products | paginate: {
      itemsPerPage: rows,
      currentPage: currentPage,
      totalItems: meta?.total
  }"
    >
      <app-auto-card [auto]='card'></app-auto-card>
    </ng-container>
  </div>
  <div *ngIf="mode === 'table'" class='mt-2'>
    <table>
      <thead>
      <tr>
        <td *ngFor="let column of columnTitles; index as i">
          <div class="table-head font-semibold">
            <h5>{{column}}</h5>
          </div>
        </td>
      </tr>
      </thead>
      <tbody *ngIf="products.length">
      <tr
        class='text-sm'
        *ngFor="let card of products | paginate: {
              itemsPerPage: rows,
              currentPage: currentPage,
              totalItems: meta?.total
          }"
        style="cursor: pointer"
      >
        <td *ngFor="let column of columns">
          <div *ngIf="column === 'title'" class="ml-2">
            <div class="text-truncate">{{card['title']}}</div>
          </div>
          <span *ngIf="column === 'mileage'" class="ml-2">
                {{card['characteristics'][column]}} км
            </span>
          <span *ngIf="column === 'driveUnit'" class="ml-2">
               {{card['characteristics'][column]}}
            </span>
          <span *ngIf="column === 'bodyType'" class="ml-2">
                {{card['characteristics'][column]}}
            </span>
          <span *ngIf="column === 'engineType'" class="ml-2">
               {{card['characteristics'][column]}}
            </span>
          <span *ngIf="column === 'engineVolume'" class="ml-2">
                {{card['characteristics'][column]}}
            </span>
          <span *ngIf="column === 'enginePower'" class="ml-2">
               {{card['characteristics'][column]}} л.c.
            </span>
          <span *ngIf="column === 'createdAt'" class="ml-2">
                {{card[column] | date: 'dd.MM.yyyy'}}
            </span>
        </td>
      </tr>
      </tbody>

    </table>
  </div>
  <div>
    <app-pagination
      [pageLimits]="pageLimits"
      [limit]="rows"
      [meta]="meta"
      title="auto-list"
      (pageChange)="paginate($event)"
      (limitChange)="onChange($event)"
      *ngIf="!loading"
    ></app-pagination>
  </div>
</div>
